<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Docentes Brown | Observatorio</title>
    <link href="https://fonts.googleapis.com/css2?family=League+Spartan:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #1a1a1a;
            --accent: #d32f2f;
            --bg: #f8f9fa;
            --card-bg: #ffffff;
            --text: #333;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        
        body { 
            font-family: 'League Spartan', sans-serif; 
            background-color: var(--bg); 
            color: var(--text);
            line-height: 1.4;
        }

        /* Splash Screen - Identidad Docentes Brown */
        #splash {
            position: fixed; top: 0; left: 0; width: 100%; height: 100dvh;
            background: var(--primary); color: white;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            z-index: 2000; transition: opacity 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        }
        #splash h1 { font-size: 2.5rem; font-weight: 700; letter-spacing: -1px; }
        #splash p { opacity: 0.8; font-weight: 400; text-transform: uppercase; font-size: 0.8rem; }

        /* Contenedor Principal */
        #main-content { display: none; padding: 16px; max-width: 500px; margin: 0 auto; }

        header { padding: 20px 0; text-align: center; }
        header h2 { font-size: 1.8rem; margin-bottom: 8px; }
        header p { font-size: 0.95rem; color: #666; }

        /* Tarjeta de Entrada */
        .card {
            background: var(--card-bg);
            border-radius: 16px;
            padding: 20px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.06);
            margin-bottom: 20px;
        }

        .label-input { display: block; margin-bottom: 10px; font-weight: 600; color: var(--primary); }
        
        .input-wrapper { position: relative; }
        .input-wrapper span { position: absolute; left: 15px; top: 50%; transform: translateY(-50%); font-weight: 700; font-size: 1.2rem; }
        
        input[type="number"] {
            width: 100%;
            padding: 16px 16px 16px 35px;
            font-size: 1.4rem;
            border: 2px solid #eee;
            border-radius: 12px;
            background: #fafafa;
            font-family: inherit;
            transition: border-color 0.3s;
        }
        input:focus { outline: none; border-color: var(--primary); background: #fff; }

        /* Resultado Impactante */
        .result-container {
            display: none;
            background: var(--primary);
            color: white;
            padding: 24px;
            border-radius: 16px;
            text-align: center;
            margin-bottom: 24px;
            animation: slideIn 0.4s ease-out;
        }
        @keyframes slideIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        .result-value { font-size: 3.5rem; font-weight: 700; color: #4ade80; display: block; line-height: 1; }
        .result-label { font-size: 1rem; opacity: 0.9; text-transform: uppercase; letter-spacing: 1px; }

        /* Lista de Productos Estilo Lista M칩vil */
        .product-item {
            display: flex;
            align-items: center;
            background: white;
            padding: 12px;
            border-bottom: 1px solid #eee;
            margin-bottom: 8px;
            border-radius: 10px;
        }
        .product-icon { 
            width: 45px; height: 45px; background: #f0f0f0; 
            border-radius: 8px; display: flex; align-items: center; 
            justify-content: center; font-size: 1.2rem; margin-right: 15px;
        }
        .product-info { flex: 1; }
        .product-info h4 { font-size: 1rem; color: var(--primary); }
        .product-info small { color: #888; display: block; }
        
        /* Nuevo cuadro de cantidad individual */
        .product-qty-box {
            background: #f0f0f0;
            padding: 8px;
            border-radius: 8px;
            text-align: center;
            min-width: 60px;
            margin-right: 15px;
        }
        .qty-value { display: block; font-weight: 700; color: var(--primary); font-size: 1.1rem; }
        .qty-label { display: block; font-size: 0.6rem; text-transform: uppercase; color: #666; }

        .product-price { font-weight: 700; color: var(--accent); font-size: 1.1rem; text-align: right; }

        .footer-note { text-align: center; font-size: 0.8rem; color: #999; margin: 30px 0; }
    </style>
</head>
<body>

    <div id="splash">
        <h1>DOCENTES BROWN</h1>
        <p>Observatorio de Poder Adquisitivo</p>
    </div>

    <div id="main-content">
        <header>
            <h2>Poder Adquisitivo</h2>
            <p>Calcul치 cu치nto rinde tu sueldo hoy seg칰n nuestra canasta b치sica, seg칰n precios publicados en Carrefour Online el 칰ltimo d칤a S치bado</p>
        </header>

        <section class="card">
            <label class="label-input" for="salaryInput">Tu Sueldo Neto Mensual</label>
            <div class="input-wrapper">
                <span>$</span>
                <input type="number" id="salaryInput" inputmode="decimal" placeholder="0.00">
            </div>
        </section>

        <div id="resultBox" class="result-container">
            <span class="result-label">Pod칠s comprar</span>
            <span id="canastaResult" class="result-value">0</span>
            <span class="result-label">Canastas completas</span>
        </div>

        <h3 style="margin: 25px 0 15px 5px;">Productos monitoreados (45)</h3>
        <div id="productsList">
        </div>

        <p class="footer-note">Datos actualizados por el equipo de Docentes Brown mediante Google Sheets.</p>
    </div>

    <script>
        // CONFIGURACI칍N
        const SHEET_URL = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vTV2sJp893B7TrQlyPYmmqm0DV9PEIQdM79lMAFapARobiKcHGf86EVWTMF2ehkLLqSjaaBLR3fU0eG/pub?output=csv'; 

        let canastaData = [];
        let totalCanasta = 0;

        // Ocultar Splash y cargar datos
        window.addEventListener('load', () => {
            setTimeout(() => {
                document.getElementById('splash').style.opacity = '0';
                setTimeout(() => {
                    document.getElementById('splash').style.display = 'none';
                    document.getElementById('main-content').style.display = 'block';
                    fetchData();
                }, 600);
            }, 1500);
        });

        async function fetchData() {
            try {
                const response = await fetch(SHEET_URL);
                const data = await response.text();
                const rows = data.split('\n').filter(row => row.trim() !== '').slice(1);

                canastaData = rows.map(row => {
                    const columns = row.split(',');
                    return {
                        nombre: columns[0],
                        marca: columns[1],
                        precio: parseFloat(columns[2])
                    };
                }).filter(p => !isNaN(p.precio));

                totalCanasta = canastaData.reduce((acc, p) => acc + p.precio, 0);
                renderProducts();
            } catch (e) { console.error("Error", e); }
        }

        function renderProducts(salary = 0) {
            const list = document.getElementById('productsList');
            const formatter = new Intl.NumberFormat('es-AR', { style: 'currency', currency: 'ARS' });
            
            list.innerHTML = canastaData.map(p => {
                const individualQty = salary > 0 ? Math.floor(salary / p.precio) : 0;
                return `
                <div class="product-item">
                    <div class="product-icon">游</div>
                    <div class="product-info">
                        <h4>${p.nombre}</h4>
                        <small>${p.marca}</small>
                    </div>
                    <div class="product-qty-box">
                        <span class="qty-value">${individualQty}</span>
                        <span class="qty-label">unidades</span>
                    </div>
                    <div class="product-price">${formatter.format(p.precio)}</div>
                </div>
            `}).join('');
        }

        document.getElementById('salaryInput').addEventListener('input', (e) => {
            const salary = parseFloat(e.target.value);
            const box = document.getElementById('resultBox');
            
            // Actualizar el render de productos para mostrar cantidades individuales
            renderProducts(salary > 0 ? salary : 0);

            if (salary > 0 && totalCanasta > 0) {
                const ratio = (salary / totalCanasta).toFixed(2);
                document.getElementById('canastaResult').innerText = ratio;
                box.style.display = 'block';
            } else {
                box.style.display = 'none';
            }
        });
    </script>
</body>
</html>
